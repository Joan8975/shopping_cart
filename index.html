<html>
    <head>
<style>
    #detail{
        display:inline-block;
        width: 200px;
    }
    img{
        width: 150px;
    }
</style>
    </head>
    <body>
     <div id="product"></div>
     <div>目前已購買：</div>
    <p id='alreadyBuy'></p>
    <button onclick=pay()>結帳</button>
    <div id='resultCheck'></div>
    
    <script>
     let product = [
  {
    name:'肥皂',
    type:'生活用品',
    price:53,
    imgurl:'https://shop.r10s.jp/himawari2013/cabinet/5/12270.jpg',
  },
  {
    name:'卡納赫拉娃娃',
    type:'娃娃',
    price:100,
    imgurl:'https://s.yimg.com/ut/api/res/1.2/_5VvQPHuXtLCJSeBtb.qcQ--~B/YXBwaWQ9eXR3bWFsbDtjYz0zMTUzNjAwMDtoPTYwMDtxPTgxO3c9NjAw/http://imgcld.zenfs.com:80/ps_image_prod/item/p0663149170578-item-2616xf3x0500x0500-m.jpg'
  },
  {
    name:'床單',
    type:'生活用品',
    price:150,
    imgurl:'https://media.karousell.com/media/photos/products/2017/08/18/bz____1502992867_d090898e0'
  },
  {
    name:'連身裙',
    type:'潮流',
    price:220,
    imgurl:'http://dress90.com/image/cache/data/Dress/Dress%20DAA1710-600x600_0.jpg'
  },
  {
    name:'一張樂透',
    type:'彩券',
    price:50,
    imgurl:'https://pic.pimg.tw/super1688tw/1497435562-4106239939_n.jpg'
  },
  {
    name:'帥哥男朋友',
    type:'夢想',
    price:99,
    imgurl:'https://www.threetong.com/uploads/allimg/161029/5-161029111404K6.jpg'
  }
]
let htmlfile = ''
product.forEach((pro,index)=>{
    htmlfile=htmlfile+'<div id=detail><img src='+pro.imgurl+'></img><h3>'+pro.name+'</h3><p>'+pro.type+'</p><p>'+pro.price+'</p><button onclick="buy('+index+')">加入購物車</button></div>'
    //htmlfile='<div><h3>肥皂</h3><p>生活用品</p></div>'
})
document.getElementById('product').innerHTML=htmlfile
let buyProduct=[]
function buy(index){
    // console.log('buy',product[index])
    //設定一個變數放置已購買商品字串
    let buyProductWord=''
    //江已購買商品放入buyProdct這個矩陣
    buyProduct.push(product[index])
    console.log(buyProduct)
    //把buyProduct這個矩陣的每一個object拿出name,融到buyProduct這個字串
    buyProduct.forEach((proObj)=>{
        buyProductWord=buyProductWord+proObj.name+'/'
    })
    document.getElementById('alreadyBuy').innerHTML=buyProductWord
}
function pay(){
    let paymoney = 0
    buyProduct.forEach((proObj)=>{
        paymoney=paymoney+proObj.price
    })
    console.log(paymoney)
    document.getElementById('resultCheck').innerHTML=
    '<p>總價:'+paymoney+'</p><button onclick="overpay()">確認結帳</button>'
}
function overpay(){
    alert('購買成功')
    buyProduct=[]
    document.getElementById('alreadyBuy').innerHTML=''
    document.getElementById('resultCheck').innerHTML=''
}
        </script>
    </body>
</html>